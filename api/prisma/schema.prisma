generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model project {
  id               Int      @id @default(autoincrement())
  name             String
  description      String?
  creationDate     DateTime @default(now()) @map("creation_date") @db.Timestamptz(6)
  modificationDate DateTime @updatedAt @map("modification_date") @db.Timestamptz(6)
  task             task[]
}

model task {
  id                   Int        @id @default(autoincrement())
  projectId            Int        @default(autoincrement()) @map("project_id")
  name                 String
  description          String?
  startDate            DateTime?  @map("start_date") @db.Timestamptz(6)
  estCompletionDate    DateTime?  @map("estimated_completion_date") @db.Timestamptz(6)
  actualCompletionDate DateTime?  @map("actual_completion_date") @db.Timestamptz(6)
  isDelayed            Boolean?   @default(false) @map("is_delayed")
  statusId             Int        @map("status_id")
  creationDate         DateTime   @default(now()) @map("creation_date") @db.Timestamptz(6)
  modificationDate     DateTime   @updatedAt @map("modification_date") @db.Timestamptz(6)
  project              project    @relation(fields: [projectId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  taskStatus           taskStatus @relation(fields: [statusId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model taskStatus {
  id         Int    @id @default(autoincrement())
  definition String @db.VarChar(24)
  task       task[]

  @@map("task_status")
}
